(function($) {
    $.fn.easyTooltip = function(options) {
        var defaults = {
            xOffset: 10,
            yOffset: 25,
            tooltipId: "easyTooltip",
            clickRemove: false,
            content: "",
            useElement: ""
        };
        var options = $.extend(defaults, options);
        var content;
        this.each(function() {
            var datatitle = $(this).attr("datatitle");
            $(this).hover(function(e) {
                content = (options.content != "") ? options.content: datatitle;
                content = (options.useElement != "") ? $("#" + options.useElement).html() : content;
                $(this).attr("datatitle", "");
                if (content != "" && content != undefined) {
                    $("body").append("<div id='" + options.tooltipId + "'>" + content + "</div>");
 $("#" + options.tooltipId).css("position", "absolute").css("top", (e.pageY - options.yOffset) + "px").css("left", (e.pageX + options.xOffset) + "px").css("display", "none").fadeIn("fast")

                }
            },
            function() {
                $("#" + options.tooltipId).remove();
                $(this).attr("datatitle", datatitle)
            });
            $(this).mousemove(function(e) {
if($(document).width() / 2 < e.pageX){
			$("#" + options.tooltipId)
                              
				.css("top",(e.pageY - options.yOffset-options.yOffset) + "px")
				.css('left',(e.pageX - $("#" + options.tooltipId).width() - options.xOffset- options.xOffset) + "px")
                             .css("display", "none").fadeIn("fast")
		} else {
			$("#" + options.tooltipId)
                           
				.css("top",(e.pageY - options.yOffset) + "px")
				.css("left",(e.pageX + options.xOffset) + "px")
                             .css("display", "none").fadeIn("fast")
		}
            });
            if (options.clickRemove) {
                $(this).mousedown(function(e) {
                    $("#" + options.tooltipId).remove();
                    $(this).attr("datatitle", datatitle)
                })
            }
        })
    }
})(jQuery);
